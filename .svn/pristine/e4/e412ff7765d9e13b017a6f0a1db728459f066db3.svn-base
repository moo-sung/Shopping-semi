<%@page import="util.Utility" %>
<%@page import="dao.MemberDAO" %>
<%@page import="dto.MemberDTO" %>
<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<% 
	if(request.getMethod().equals("GET")){
		out.println("<script type='text/javascript'>");
		out.println("location.href='"+request.getContextPath()+"/site/index.jsp?workgroup=error&work=error400'");
		out.println("</script>");
		return;
	}
	
	String email=request.getParameter("email");
	String password=Utility.encrypt(request.getParameter("password"));
	String name=request.getParameter("name").trim();
	String phone=request.getParameter("phone");
	
	MemberDTO member=new MemberDTO();
	member.setEmail(email);
	member.setPassword(password);
	member.setPhone(phone);
	member.setGrade("10");
	
	MemberDAO.getDAO().insertMember(member);
	
	out.println("<script type='text/javascript'>");
	out.println("location.href='"+request.getContextPath()+"/site/index.jsp?workgroup=member&work=member_login'");
	out.println("</script>");
%>